{
  "fluxo": "cotacoes-moedas-filtradas-por-tipo-boletim",
  "contrato": {
    "entrada": [
      {
        "id": "id-nome-moeda",
        "nomeCampo": "nomeMoeda",
        "obrigatorio": true
      },
      {
        "id": "id-data-referencia-cotacao",
        "nomeCampo": "dataReferenciaCotacao",
        "obrigatorio": true
      },
      {
        "id": "id-tipo-boletim",
        "nomeCampo": "tipoBoletim",
        "obrigatorio": true
      }
    ],
    "saida": [
      {
        "id": "lista-cotacoes-filtradas-por-tipo-boletim",
        "nomeCampo": "cotacaoFiltrada",
        "valor": "{{java(transformadorFiltrarListaDeObjetos(java(transformadorListaObjetos({{variaveis$.variavel-lista-cotacoes}}, {{mapeamentos$.mapeamento-cotacoes}})), \"tipoBoletim\",{{variaveis$.variavel-tipo-boletim}})}}))}}"
      }
    ]
  },
  "orquestrador": {
    "passos": [
      {
        "ordem": 1,
        "id": "passo-consulta-cotacao-moeda",
        "tipo": "API",
        "integracao": {
          "requisicao": {
            "metodo": "GET",
            "url": "https://brasilapi.com.br/api/cambio/v1/cotacao/{{variaveis$.variavel-nome-moeda}}/{{variaveis$.variavel-data-referencia-cotacao}}",
            "queryParams": null,
            "headers": {
              "Content-Type": "application/json"
            },
            "body": null
          },
          "resposta": {
            "body": {
              "cotacoes": [
                {
                  "paridade_compra": "Integer",
                  "paridade_venda": "Integer",
                  "cotacao_compra": "BigDecimal",
                  "cotacao_venda": "BigDecimal",
                  "data_hora_cotacao": "String",
                  "tipo_boletim": "String"
                }
              ],
              "moeda": "String",
              "data": "String"
            }
          }
        }
      }
    ]
  },
  "metadados": {
    "variaveis": [
      {
        "id": "variavel-nome-moeda",
        "origem": {
          "tipoReferencia": "contrato",
          "idReferencia": "{{entrada$.id-nome-moeda}}"
        }
      },
      {
        "id": "variavel-data-referencia-cotacao",
        "origem": {
          "tipoReferencia": "contrato",
          "idReferencia": "{{entrada$.id-data-referencia-cotacao}}"
        }
      },
      {
        "id": "variavel-tipo-boletim",
        "origem": {
          "tipoReferencia": "contrato",
          "idReferencia": "{{entrada$.id-tipo-boletim}}"
        }
      },
      {
        "id": "variavel-lista-cotacoes",
        "origem": {
          "tipoReferencia": "orquestrador",
          "idReferencia": "{{api$.passo-consulta-cotacao-moeda$.resposta$.cotacoes}}"
        }
      }
    ],
    "mapeamentos": [
      {
        "id": "mapeamento-cotacoes",
        "campos": [
          {
            "origem": "paridade_compra",
            "destino": "paridadeCompra"
          },
          {
            "origem": "paridade_venda",
            "destino": "paridadeVenda"
          },
          {
            "origem": "cotacao_compra",
            "destino": "cotacaoCompra"
          },
          {
            "origem": "cotacao_venda",
            "destino": "cotacaoVenda"
          },
          {
            "origem": "data_hora_cotacao",
            "destino": "dataHoraCotacao"
          },
          {
            "origem": "tipo_boletim",
            "destino": "tipoBoletim"
          }
        ]
      }
    ]
  }
}
